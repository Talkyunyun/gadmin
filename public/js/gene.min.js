!function(e,f){"object"==typeof module&&module.exports?module.exports=f():"function"==typeof define&&define.amd?define(f):e.Spinner=f()}(this,function(){function e(c,a){var b,v=document.createElement(c||"div");for(b in a)v[b]=a[b];return v}function f(c){for(var a=1,b=arguments.length;b>a;a++)c.appendChild(arguments[a]);return c}function q(c,a,b,v){var d=["opacity",a,~~(100*c),b,v].join("-");b=.01+b/v*100;v=Math.max(1-(1-c)/a*(100-b),c);var g=r.substring(0,r.indexOf("Animation")).toLowerCase();return l[d]||
(t.insertRule("@"+(g&&"-"+g+"-"||"")+"keyframes "+d+"{0%{opacity:"+v+"}"+b+"%{opacity:"+c+"}"+(b+.01)+"%{opacity:1}"+(b+a)%100+"%{opacity:"+c+"}100%{opacity:"+v+"}}",t.cssRules.length),l[d]=1),d}function u(c,a){var b,v,d=c.style;if(a=a.charAt(0).toUpperCase()+a.slice(1),void 0!==d[a])return a;for(v=0;v<m.length;v++)if(b=m[v]+a,void 0!==d[b])return b}function h(c,a){for(var b in a)c.style[u(c,b)||b]=a[b];return c}function w(c){for(var a=1;a<arguments.length;a++){var b=arguments[a],d;for(d in b)void 0===
c[d]&&(c[d]=b[d])}return c}function x(c,a){return"string"==typeof c?c:c[a%c.length]}function n(c){this.opts=w(c||{},n.defaults,y)}function z(){function c(a,b){return e("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',b)}t.addRule(".spin-vml","behavior:url(#default#VML)");n.prototype.lines=function(a,b){function d(){return h(c("group",{coordsize:k+" "+k,coordorigin:-e+" "+-e}),{width:k,height:k})}function p(a,p,g){f(r,f(h(d(),{rotation:360/b.lines*a+"deg",left:~~p}),f(h(c("roundrect",
{arcsize:b.corners}),{width:e,height:b.scale*b.width,left:b.scale*b.radius,top:-b.scale*b.width>>1,filter:g}),c("fill",{color:x(b.color,a),opacity:b.opacity}),c("stroke",{opacity:0}))))}var g,e=b.scale*(b.length+b.width),k=2*b.scale*e;g=-(b.width+b.length)*b.scale*2+"px";var r=h(d(),{position:"absolute",top:g,left:g});if(b.shadow)for(g=1;g<=b.lines;g++)p(g,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(g=1;g<=b.lines;g++)p(g);return f(a,r)};n.prototype.opacity=
function(a,b,c,d){a=a.firstChild;d=d.shadow&&d.lines||0;a&&b+d<a.childNodes.length&&(a=a.childNodes[b+d],a=a&&a.firstChild,a=a&&a.firstChild,a&&(a.opacity=c))}}var r,t,m=["webkit","Moz","ms","O"],l={},y={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2E9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};if(n.defaults={},w(n.prototype,{spin:function(c){this.stop();var a=this,b=a.opts,
d=a.el=e(null,{className:b.className});if(h(d,{position:b.position,width:0,zIndex:b.zIndex,left:b.left,top:b.top}),c&&c.insertBefore(d,c.firstChild||null),d.setAttribute("role","progressbar"),a.lines(d,a.opts),!r){var p,g=0,f=(b.lines-1)*(1-b.direction)/2,k=b.fps,l=k/b.speed,m=(1-b.opacity)/(l*b.trail/100),t=l/b.lines;!function A(){g++;for(var c=0;c<b.lines;c++)p=Math.max(1-(g+(b.lines-c)*t)%l*m,b.opacity),a.opacity(d,c*b.direction+f,p,b);a.timeout=a.el&&setTimeout(A,~~(1E3/k))}()}return a},stop:function(){var c=
this.el;return c&&(clearTimeout(this.timeout),c.parentNode&&c.parentNode.removeChild(c),this.el=void 0),this},lines:function(c,a){function b(b,c){return h(e(),{position:"absolute",width:a.scale*(a.length+a.width)+"px",height:a.scale*a.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/a.lines*p+a.rotate)+"deg) translate("+a.scale*a.radius+"px,0)",borderRadius:(a.corners*a.scale*a.width>>1)+"px"})}for(var d,p=0,g=(a.lines-1)*(1-a.direction)/2;p<a.lines;p++)d=h(e(),
{position:"absolute",top:1+~(a.scale*a.width/2)+"px",transform:a.hwaccel?"translate3d(0,0,0)":"",opacity:a.opacity,animation:r&&q(a.opacity,a.trail,g+p*a.direction,a.lines)+" "+1/a.speed+"s linear infinite"}),a.shadow&&f(d,h(b("#000","0 0 4px #000"),{top:"2px"})),f(c,f(d,b(x(a.color,p),"0 0 1px rgba(0,0,0,.1)")));return c},opacity:function(c,a,b){a<c.childNodes.length&&(c.childNodes[a].style.opacity=b)}}),"undefined"!=typeof document){t=function(){var c=e("style",{type:"text/css"});return f(document.getElementsByTagName("head")[0],
c),c.sheet||c.styleSheet}();var d=h(e("group"),{behavior:"url(#default#VML)"});!u(d,"transform")&&d.adj?z():r=u(d,"animation")}return n});"use strict";
var iosOverlay=function(e){var f,q=function(){},q={onbeforeshow:q,onshow:q,onbeforehide:q,onhide:q,text:"",icon:null,spinner:null,duration:null,id:null,parentEl:null},u=function(){var f=(document.body||document.documentElement).style,e="transition";if("string"===typeof f[e])return!0;for(var h=["Moz","Webkit","Khtml","O","ms"],e=e.charAt(0).toUpperCase()+e.substr(1),m=0;m<h.length;m+=1)if("string"===typeof f[h[m]+e])return!0;return!1}(),h=function(e,f){var h={},m;for(m in e)h[m]=e[m];for(var l in f)h[l]=
f[l];return h}(q,e),w=function(e){if("ios-overlay-show"===e.animationName)h.onshow();"ios-overlay-hide"===e.animationName&&(n(),h.onhide())};(function(){f=document.createElement("div");f.className="ui-ios-overlay";f.innerHTML+='<span class="title">'+h.text+"</span";e.icon?f.innerHTML+='<div class="font_style"><i class="'+e.icon+'" style="color:'+e.color+'"></i></div>':e.spinner&&f.appendChild(e.spinner.el);u&&(f.addEventListener("webkitAnimationEnd",w,!1),f.addEventListener("msAnimationEnd",w,!1),
f.addEventListener("oAnimationEnd",w,!1),f.addEventListener("animationend",w,!1));e.parentEl?document.getElementById(e.parentEl).appendChild(f):document.body.appendChild(f);h.onbeforeshow();u?f.className+=" ios-overlay-show":"function"===typeof $&&$(f).fadeIn({duration:200},function(){h.onshow()});h.duration&&window.setTimeout(function(){x()},h.duration)})();var x=function(){h.onbeforehide();u?f.className=f.className.replace("show","hide"):"function"===typeof $&&$(f).fadeOut({duration:200},function(){n();
h.onhide()})},n=function(){e.parentEl?document.getElementById(e.parentEl).removeChild(f):document.body.removeChild(f)};return{hide:x,destroy:n,update:function(e){e.text&&(f.getElementsByTagName("span")[0].innerHTML=e.text);e.icon&&(h.spinner&&(h.spinner.el.parentNode.removeChild(h.spinner.el),h.spinner=null),f.innerHTML+='<div class="font_style"><i class="'+e.icon+'" style="color:'+e.color+'"></i></div>')}}};"function"===typeof define&&define.amd&&define([],function(){return iosOverlay});
!function(e,f){"object"==typeof module&&module.exports?module.exports=f():"function"==typeof define&&define.amd?define(f):e.Spinner=f()}(this,function(){function e(c,a){var b,d=document.createElement(c||"div");for(b in a)d[b]=a[b];return d}function f(c){for(var a=1,b=arguments.length;b>a;a++)c.appendChild(arguments[a]);return c}function q(c,a,b,d){var e=["opacity",a,~~(100*c),b,d].join("-");b=.01+b/d*100;d=Math.max(1-(1-c)/a*(100-b),c);var g=r.substring(0,r.indexOf("Animation")).toLowerCase();return l[e]||
(t.insertRule("@"+(g&&"-"+g+"-"||"")+"keyframes "+e+"{0%{opacity:"+d+"}"+b+"%{opacity:"+c+"}"+(b+.01)+"%{opacity:1}"+(b+a)%100+"%{opacity:"+c+"}100%{opacity:"+d+"}}",t.cssRules.length),l[e]=1),e}function u(c,a){var b,d,e=c.style;if(a=a.charAt(0).toUpperCase()+a.slice(1),void 0!==e[a])return a;for(d=0;d<m.length;d++)if(b=m[d]+a,void 0!==e[b])return b}function h(c,a){for(var b in a)c.style[u(c,b)||b]=a[b];return c}function w(c){for(var a=1;a<arguments.length;a++){var b=arguments[a],d;for(d in b)void 0===
c[d]&&(c[d]=b[d])}return c}function x(c,a){return"string"==typeof c?c:c[a%c.length]}function n(c){this.opts=w(c||{},n.defaults,y)}function z(){function c(a,b){return e("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',b)}t.addRule(".spin-vml","behavior:url(#default#VML)");n.prototype.lines=function(a,b){function d(){return h(c("group",{coordsize:k+" "+k,coordorigin:-l+" "+-l}),{width:k,height:k})}function e(a,g,p){f(m,f(h(d(),{rotation:360/b.lines*a+"deg",left:~~g}),f(h(c("roundrect",
{arcsize:b.corners}),{width:l,height:b.scale*b.width,left:b.scale*b.radius,top:-b.scale*b.width>>1,filter:p}),c("fill",{color:x(b.color,a),opacity:b.opacity}),c("stroke",{opacity:0}))))}var g,l=b.scale*(b.length+b.width),k=2*b.scale*l;g=-(b.width+b.length)*b.scale*2+"px";var m=h(d(),{position:"absolute",top:g,left:g});if(b.shadow)for(g=1;g<=b.lines;g++)e(g,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(g=1;g<=b.lines;g++)e(g);return f(a,m)};n.prototype.opacity=
function(a,b,c,d){a=a.firstChild;d=d.shadow&&d.lines||0;a&&b+d<a.childNodes.length&&(a=a.childNodes[b+d],a=a&&a.firstChild,a=a&&a.firstChild,a&&(a.opacity=c))}}var r,t,m=["webkit","Moz","ms","O"],l={},y={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2E9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};if(n.defaults={},w(n.prototype,{spin:function(c){this.stop();var a=this,b=a.opts,
d=a.el=e(null,{className:b.className});if(h(d,{position:b.position,width:0,zIndex:b.zIndex,left:b.left,top:b.top}),c&&c.insertBefore(d,c.firstChild||null),d.setAttribute("role","progressbar"),a.lines(d,a.opts),!r){var f,g=0,l=(b.lines-1)*(1-b.direction)/2,k=b.fps,m=k/b.speed,n=(1-b.opacity)/(m*b.trail/100),q=m/b.lines;!function A(){g++;for(var c=0;c<b.lines;c++)f=Math.max(1-(g+(b.lines-c)*q)%m*n,b.opacity),a.opacity(d,c*b.direction+l,f,b);a.timeout=a.el&&setTimeout(A,~~(1E3/k))}()}return a},stop:function(){var c=
this.el;return c&&(clearTimeout(this.timeout),c.parentNode&&c.parentNode.removeChild(c),this.el=void 0),this},lines:function(c,a){function b(b,c){return h(e(),{position:"absolute",width:a.scale*(a.length+a.width)+"px",height:a.scale*a.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/a.lines*p+a.rotate)+"deg) translate("+a.scale*a.radius+"px,0)",borderRadius:(a.corners*a.scale*a.width>>1)+"px"})}for(var d,p=0,g=(a.lines-1)*(1-a.direction)/2;p<a.lines;p++)d=h(e(),
{position:"absolute",top:1+~(a.scale*a.width/2)+"px",transform:a.hwaccel?"translate3d(0,0,0)":"",opacity:a.opacity,animation:r&&q(a.opacity,a.trail,g+p*a.direction,a.lines)+" "+1/a.speed+"s linear infinite"}),a.shadow&&f(d,h(b("#000","0 0 4px #000"),{top:"2px"})),f(c,f(d,b(x(a.color,p),"0 0 1px rgba(0,0,0,.1)")));return c},opacity:function(c,a,b){a<c.childNodes.length&&(c.childNodes[a].style.opacity=b)}}),"undefined"!=typeof document){t=function(){var c=e("style",{type:"text/css"});return f(document.getElementsByTagName("head")[0],
c),c.sheet||c.styleSheet}();var d=h(e("group"),{behavior:"url(#default#VML)"});!u(d,"transform")&&d.adj?z():r=u(d,"animation")}return n});
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery||window.Zepto)}(function(e,f){function q(){}function u(d,c){var a;return a=c._$container==l?("innerHeight"in m?m.innerHeight:l.height())+l.scrollTop():c._$container.offset().top+c._$container.height(),a<=d.offset().top-c.threshold}function h(d,c){var a;return a=c._$container==l?l.width()+(e.fn.scrollLeft?l.scrollLeft():m.pageXOffset):c._$container.offset().left+c._$container.width(),a<=d.offset().left-c.threshold}
function w(d,c){var a;return a=c._$container==l?l.scrollTop():c._$container.offset().top,a>=d.offset().top+c.threshold+d.height()}function x(d,c){var a;return a=c._$container==l?e.fn.scrollLeft?l.scrollLeft():m.pageXOffset:c._$container.offset().left,a>=d.offset().left+c.threshold+d.width()}function n(d,c){var a=0;d.each(function(b,e){function f(){g.trigger("_lazyload_appear");a=0}var g=d.eq(b);if(!(0>=g.width()&&0>=g.height()||"none"===g.css("display")))if(c.vertical_only){if(!w(g,c))if(u(g,c)){if(++a>
c.failure_limit)return!1}else f()}else if(!w(g,c)&&!x(g,c))if(u(g,c)||h(g,c)){if(++a>c.failure_limit)return!1}else f()})}function z(d){return d.filter(function(c,a){return!d.eq(c)._lazyload_loadStarted})}function r(d,c){function a(){g=0;h=+new Date;f=d.apply(b,e);e=b=null}var b,e,f,g,h=0;return function(){b=this;e=arguments;var d=new Date-h;return g||(d>=c?a():g=setTimeout(a,c-d)),f}}var t,m=window,l=e(m),y={threshold:0,failure_limit:0,event:"scroll",effect:"show",effect_params:null,container:m,data_attribute:"original",
data_srcset_attribute:"original-srcset",skip_invisible:!0,appear:q,load:q,vertical_only:!1,check_appear_throttle_time:300,url_rewriter_fn:q,no_fake_img_loader:!1,placeholder_data_img:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC",placeholder_real_img:"http://ditu.baidu.cn/yyfm/lazyload/0.0.1/img/placeholder.png"};t=function(){var d=Object.prototype.toString;return function(c){return d.call(c).replace("[object ",
"").replace("]","")}}();e.fn.hasOwnProperty("lazyload")||(e.fn.lazyload=function(d){var c,a,b,f=this;return e.isPlainObject(d)||(d={}),e.each(y,function(a,b){-1!=e.inArray(a,["threshold","failure_limit","check_appear_throttle_time"])?"String"==t(d[a])?d[a]=parseInt(d[a],10):d[a]=b:"container"==a?(d.hasOwnProperty(a)?d[a]==m||d[a]==document?d._$container=l:d._$container=e(d[a]):d._$container=l,delete d.container):!y.hasOwnProperty(a)||d.hasOwnProperty(a)&&t(d[a])==t(y[a])||(d[a]=b)}),c="scroll"==d.event,
b=0==d.check_appear_throttle_time?n:r(n,d.check_appear_throttle_time),a=c||"scrollstart"==d.event||"scrollstop"==d.event,f.each(function(b,c){var h=this,k=f.eq(b),l=k.attr("src"),m=k.attr("data-"+d.data_attribute),n=d.url_rewriter_fn==q?m:d.url_rewriter_fn.call(h,k,m),r=k.attr("data-"+d.data_srcset_attribute),t=k.is("img");return 1==k._lazyload_loadStarted||l==n?(k._lazyload_loadStarted=!0,void(f=z(f))):(k._lazyload_loadStarted=!1,t&&!l&&k.one("error",function(){k.attr("src",d.placeholder_real_img)}).attr("src",
d.placeholder_data_img),k.one("_lazyload_appear",function(){function a(){b&&k.hide();t?(r&&k.attr("srcset",r),n&&k.attr("src",n)):k.css("background-image",'url("'+n+'")');b&&k[d.effect].apply(k,c?d.effect_params:[]);f=z(f)}var b,c=e.isArray(d.effect_params);k._lazyload_loadStarted||(b="show"!=d.effect&&e.fn[d.effect]&&(!d.effect_params||c&&0==d.effect_params.length),d.appear!=q&&d.appear.call(h,k,f.length,d),k._lazyload_loadStarted=!0,d.no_fake_img_loader||r?(d.load!=q&&k.one("load",function(){d.load.call(h,
k,f.length,d)}),a()):e("<img />").one("load",function(){a();d.load!=q&&d.load.call(h,k,f.length,d)}).attr("src",n))}),void(a||k.on(d.event,function(){k._lazyload_loadStarted||k.trigger("_lazyload_appear")})))}),a&&d._$container.on(d.event,function(){b(f,d)}),l.on("resize load",function(){b(f,d)}),e(function(){b(f,d)}),this})});
