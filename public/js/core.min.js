function Core(){this.name="Site Name";this.SITE_NAME=window.location.href||"www.mmlogs.com";this.share_desc="";this.APP_URL="http://a.app.qq.com/o/simple.jsp?pkgname=com.gutplus.pitube";this.APP_LOGO="http://m.pitube.tv/img/down_logo.png";this.regular={phone:/^1[3,4,5,7,8][0-9]{9}$/,email:/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/,url:/^((https|http):\/\/)[^\s]+$/,name:/^[a-zA-Z]\w{3,20}$/,password:/^.{6,}/,space:/\s+/g,wrap:/[\r\n]/g};this.init()}
Core.prototype.init=function(){if(this.isWechat()){var a=window.location.href;0<a.indexOf("#")&&(a=a.substring(0,a.lastIndexOf("#")));$.ajax({type:"post",url:"http://www.mobile.com/wechat/get-wechat-jssdk",data:{url:a},dataType:"jsonp",jsonp:"callback",success:function(a){200==a.code?wx.config({debug:!1,appId:a.data.appId,timestamp:a.data.timestamp,nonceStr:a.data.nonceStr,signature:a.data.signature,jsApiList:"onMenuShareTimeline onMenuShareAppMessage onMenuShareQQ onMenuShareWeibo onMenuShareQZone startRecord stopRecord onVoiceRecordEnd playVoice pauseVoice stopVoice onVoicePlayEnd uploadVoice downloadVoice chooseImage previewImage uploadImage downloadImage translateVoice getNetworkType openLocation getLocation hideOptionMenu showOptionMenu hideMenuItems showMenuItems hideAllNonBaseMenuItem showAllNonBaseMenuItem closeWindow scanQRCode chooseWXPay openProductSpecificView addCard chooseCard openCard".split(" ")}):
console.log("\u5fae\u4fe1\u521d\u59cb\u5316\u5931\u8d25")},error:function(){console.log("\u5fae\u4fe1\u521d\u59cb\u5316\u5931\u8d25")}})}};Core.prototype.isWechat=function(){return"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)?!0:!1};Core.prototype.client=function(){var a=window.navigator.userAgent.toLowerCase();return a.match(/iphone|ipod|ipad/i)?"ios":a.match(/android/i)?"android":"other"};
Core.prototype.getUrlVal=function(a){a=new RegExp("(^|&)"+a+"=([^&]*)(&|$)");a=window.location.search.substr(1).match(a);return null!=a?unescape(a[2]):!1};Core.prototype.hasApp=function(a){var b=this;window.location=a;setTimeout(function(){window.location.href=b.APP_URL},2)};
Core.prototype.openApp=function(a){var b=a||0;a='<div style="width:100%;height:100%;background:rgba(0,0,0,0.56);z-index:999999999;position:fixed;top:0;left:0;"><div style="position:fixed;top:50%;left:50%;z-index:9999999;width:240px;height:120px;border-radius:6px;background:#ffffff;margin-top:-60px;margin-left:-120px;overflow:hidden;"><h4 style="text-align:center;font-weight:normal;font-size:16px;height:80px;line-height:80px;">\u6253\u5f00PiTube\u770b\u9ad8\u6e05\u76f4\u64ad</h4><div style="overflow:hidden;border-top:1px solid #dedede;position:absolute;bottom:0;left:0;font-size:14px;"><button type="button" style="width:120px;border:none;outline:none;height:100%;display:block;float:left;text-align:center;background:none;line-height:40px;text-decoration:none;width:119px;" onclick="$(this).parent().parent().parent().remove()">\u53d6\u6d88</button>';b=
"ios"==this.client()?"https://api.pitube.tv/open?live_id="+b+"&type=01":"com.gutplus.pitube://01?live_id="+b;a+='<a href="javascript:void(0)" onclick="APP.hasApp(\''+b+'\')" style="width:120px;border:none;outline:none;height:100%;display:block;float:left;text-align:center;background:none;line-height:40px;text-decoration:none;color:#e75280;border-left:1px solid #e9e9e9;">\u6253\u5f00</a></div></div></div>';$("body").append(a)};
Core.prototype.getSpin=function(){var a=document.createElement("div");document.body.appendChild(a);return(new Spinner({lines:13,length:13,width:3,radius:10,scale:1.25,corners:1,opacity:.25,rotate:0,color:"#fff",speed:1,trail:60,shadow:!0,hwaccel:!0,zIndex:2E9,top:"auto",left:"auto",fps:20,direction:1,className:"spinner"})).spin(a)};
Core.prototype.msg=function(a,b,d){var c={};msg=a||"\u64cd\u4f5c\u5931\u8d25";type=b||0;hideTime=d||2E3;c.text=msg;switch(type){case 0:c.icon="iconfont icon-icon_wrong";c.duration=hideTime;break;case 1:c.icon="iconfont icon-dui";c.duration=hideTime;break;case 2:c.spinner=this.getSpin()}return iosOverlay(c)};
Core.prototype.shareQQqzone=function(a){if("object"!=typeof a)return this.msg("\u5206\u4eab\u5931\u8d25"),!1;var b=a.url||window.location.href,d=a.title||document.title,c=a.desc||d;a=a.img;var e=this.SITE_NAME,f=this.share_desc;if(0>=b.length||0>=d.length)return this.msg("\u5206\u4eab\u5931\u8d25\uff01"),!1;b="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+encodeURIComponent(b)+"&title="+encodeURIComponent(d)+"&desc="+encodeURIComponent(f)+"&summary="+encodeURIComponent(c)+"&site="+
encodeURIComponent(e)+"&pics="+encodeURIComponent(a);window.open(b)};
Core.prototype.shareWeibo=function(a){if("object"!=typeof a)return this.msg("\u5206\u4eab\u5931\u8d25"),!1;var b=a.url||window.location.href;a=a.title||document.title;var d=this.SITE_NAME;if(0>=b.length||0>=a.length)return this.msg("\u5206\u4eab\u5931\u8d25\uff01"),!1;b="http://service.weibo.com/share/share.php?type=button&language=zh_cn&appkey=2050039137&searchPic=true&style=number&url="+encodeURIComponent(b)+"&title="+encodeURIComponent(a)+"&site="+encodeURIComponent(d);window.open(b)};
Core.prototype.showDown=function(){contentStyle="width:18rem;height:22.8rem;background: rgb(47, 47, 47);position: fixed;top: 50%;left: 50%;margin-left: -9rem;margin-top:-11.4rem;border-radius: 1rem;overflow: hidden;color:#fff;text-align:center";closeStyle="position:absolute;right:.1rem;top:.1rem;font-size: 2.3rem;color: #fff;background: rgba(0, 0, 0, 0);border:none;";logoStyle="width:8rem;overflow: hidden;margin:2rem auto 0 auto;";btnStyle="display:block;background:#1ed225;width:12rem;margin: 0 auto;height: 2.6rem;line-height: 2.6rem;color: #fff;border-radius:10rem;margin-top:1.6rem;font-size: 1rem;";
var a;a='<section style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.4);">'+('<div style="'+contentStyle+'">');a+='<button onclick="javascript:$(this).parent().parent().remove();" style="'+closeStyle+'" class="iconfont icon-guanbi"></button>';a+='<div style="'+logoStyle+'"><img style="width:100%" src="'+this.APP_LOGO+'" /></div>';a+='<p style="font-size: .1rem;margin-top: 1rem;margin-bottom: .1rem;">\u7acb\u5373\u4e0b\u8f7d\u5b89\u88c5PiTube</p><p>\u89c2\u770b\u7cbe\u5f69\u5185\u5bb9\uff0c\u4e0e\u8fbe\u4eba\u4e92\u52a8</p>';
a+='<a style="'+btnStyle+'" href="'+this.APP_URL+'">\u70b9\u51fb\u4e0b\u8f7d\u5b89\u88c5</a>';a+="</div></section>";$("body").append(a)};Core.prototype.loadImg=function(a){a=a||"";if(0>=a.length)return!1;$(a).lazyload({effect:"fadeIn"})};Core.prototype.getTimeByZone=function(a,b,d){var c;c=(d||"GMT+8").toUpperCase();0<c.indexOf(":")?(d=c.split(":")[0].split("GMT")[1],c=c.split(":")[1]):(d=c.split("GMT")[1],c="00");3>d.length&&(d=d.substr(0,1)+"0"+d.substr(1,1));return(new Date(a+"T"+b+d+":"+c)).getTime()};
var APP=new Core;
